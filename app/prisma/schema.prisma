// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
		provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
	id				Int			@id @default(autoincrement())
	
	code2FA			String
	auth2FA			Boolean		@default(false) 

	socketId		String		 

	nickname		String		@unique
	login_42		String		@unique

	email_42		String
	img_str			String		@default("default_user.png")

	elo				Int			@default(500)

	wins			matches[]	@relation("wins")
	loses			matches[]	@relation("loses")
	// socket_id		Int
}

model Friends {
	id					Int			@id @default(autoincrement())

	idUser1				String
	idUser2				String
}

model JoinedChannels {
	id					Int			@id @default(autoincrement())
	idUser				String		@unique
	idChannel			String
}

model Channel {
	id					Int			@id @default(autoincrement())
	Name				String		@unique
	Password			String
}








model BlockedChannel {
	id					Int			@id @default(autoincrement())
	idUser				String
	idChannel			String
}

model BlockedUsers {
	id					Int			@id @default(autoincrement())
	userBlocker			String
	userBlocked			String
}








model gameRooms {
	id					Int			@id @default(autoincrement())
	playerLeft			String
	playerRight			String
}

model viewers {
	id					Int			@id @default(autoincrement())
	idUserWatching		String
	idGameRoom			Int
}

model matches {
	id					Int			@id @default(autoincrement())
	userWon				User   		@relation("wins", fields: [idUsuarioVictoria], references: [id])
	userLost			User   		@relation("loses", fields: [idUsuarioDerrota], references: [id])

	idUsuarioVictoria	Int
	idUsuarioDerrota	Int
	modoDeJuego			String		//Normal, Modificado
	ranked				Boolean
}